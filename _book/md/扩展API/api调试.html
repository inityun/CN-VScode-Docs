
<!DOCTYPE HTML>
<html lang="zh-hans" >
    <head>
        <meta charset="UTF-8">
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <title>api调试 · vscode-docs</title>
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta name="description" content="">
        <meta name="generator" content="GitBook 3.2.3">
        <meta name="author" content="VSCodeContributorsinChina">
        
        
    
    <link rel="stylesheet" href="../../gitbook/style.css">

    
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-search-pro/search.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-intopic-toc/style.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-highlight/website.css">
                
            
                
                <link rel="stylesheet" href="../../gitbook/gitbook-plugin-fontsettings/website.css">
                
            
        

    

    
        
    
        
    
        
    
        
    
        
    
        
    

        
    
    
    <meta name="HandheldFriendly" content="true"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <link rel="apple-touch-icon-precomposed" sizes="152x152" href="../../gitbook/images/apple-touch-icon-precomposed-152.png">
    <link rel="shortcut icon" href="../../gitbook/images/favicon.ico" type="image/x-icon">

    
    <link rel="next" href="../../summary/语言.html" />
    
    
    <link rel="prev" href="vscode-api-命令.html" />
    

    </head>
    <body>
        
<div class="book">
    <div class="book-summary">
        
            
<div id="book-search-input" role="search">
    <input type="text" placeholder="输入并搜索" />
</div>

            
                <nav role="navigation">
                


<ul class="summary">
    
    

    

    
        
        
    
        <li class="chapter " data-level="1.1" data-path="../../">
            
                <a href="../../">
            
                    
                    简介
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.2" >
            
                <a target="_blank" href="https://code.visualstudio.com/docs">
            
                    
                    官方文档
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.3" data-path="../Overview.html">
            
                <a href="../Overview.html">
            
                    
                    概览
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4" data-path="../快速入门.md">
            
                <span>
            
                    
                    快速入门(暂无)
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.4.1" data-path="../快速入门/介绍视频.html">
            
                <a href="../快速入门/介绍视频.html">
            
                    
                    视频介绍
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.2" data-path="../快速入门/小技巧.html">
            
                <a href="../快速入门/小技巧.html">
            
                    
                    小技巧
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.3" data-path="../快速入门/用户接口.html">
            
                <a href="../快速入门/用户接口.html">
            
                    
                    用户接口
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.4" data-path="../快速入门/主题.html">
            
                <a href="../快速入门/主题.html">
            
                    
                    主题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.5" data-path="../快速入门/设置.html">
            
                <a href="../快速入门/设置.html">
            
                    
                    设置
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.6" data-path="../快速入门/快捷键绑定.html">
            
                <a href="../快速入门/快捷键绑定.html">
            
                    
                    快捷键绑定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.4.7" data-path="../快速入门/语言区域.html">
            
                <a href="../快速入门/语言区域.html">
            
                    
                    语言区域
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.5" data-path="../../summary/编辑器.html">
            
                <a href="../../summary/编辑器.html">
            
                    
                    编辑器
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.5.1" data-path="../编辑器/基础.html">
            
                <a href="../编辑器/基础.html">
            
                    
                    基础
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.2" data-path="../编辑器/安装.html">
            
                <a href="../编辑器/安装.html">
            
                    
                    安装
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.3" data-path="../编辑器/扩展市场.html">
            
                <a href="../编辑器/扩展市场.html">
            
                    
                    扩展市场
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.4" data-path="../编辑器/任务.html">
            
                <a href="../编辑器/任务.html">
            
                    
                    任务
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.5" data-path="../编辑器/调试.html">
            
                <a href="../编辑器/调试.html">
            
                    
                    调试
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.6" data-path="../编辑器/为什么选用VSCode.html">
            
                <a href="../编辑器/为什么选用VSCode.html">
            
                    
                    为什么选用VSCode
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.7" data-path="../编辑器/版本控制.html">
            
                <a href="../编辑器/版本控制.html">
            
                    
                    版本控制
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.8" data-path="../编辑器/易用性.html">
            
                <a href="../编辑器/易用性.html">
            
                    
                    易用性
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.5.9" data-path="../编辑器/与时俱进的编辑体验.html">
            
                <a href="../编辑器/与时俱进的编辑体验.html">
            
                    
                    与时俱进的编辑体验
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.6" data-path="../../summary/定制化.html">
            
                <a href="../../summary/定制化.html">
            
                    
                    定制化
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.6.1" data-path="../定制化/概述.html">
            
                <a href="../定制化/概述.html">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.2" data-path="../定制化/用户和工作空间.html">
            
                <a href="../定制化/用户和工作空间.html">
            
                    
                    用户和工作空间
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.3" data-path="../定制化/快捷键绑定.html">
            
                <a href="../定制化/快捷键绑定.html">
            
                    
                    快捷键绑定
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.4" data-path="../定制化/用户定义代码段.html">
            
                <a href="../定制化/用户定义代码段.html">
            
                    
                    用户定义代码段
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.5" data-path="../定制化/调色板.html">
            
                <a href="../定制化/调色板.html">
            
                    
                    调色板
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.6" data-path="../定制化/主题.html">
            
                <a href="../定制化/主题.html">
            
                    
                    主题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.6.7" data-path="../定制化/语言区域.html">
            
                <a href="../定制化/语言区域.html">
            
                    
                    语言区域
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.7" data-path="../../summary/工具.html">
            
                <a href="../../summary/工具.html">
            
                    
                    工具
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.7.1" data-path="../工具/vse命令行工具.html">
            
                <a href="../工具/vse命令行工具.html">
            
                    
                    vse命令行工具
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.2" data-path="../工具/yocode扩展生成器.html">
            
                <a href="../工具/yocode扩展生成器.html">
            
                    
                    yocode扩展生成器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.7.3" data-path="../工具/范例.html">
            
                <a href="../工具/范例.html">
            
                    
                    范例
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.8" data-path="../../summary/技术支持.html">
            
                <a href="../../summary/技术支持.html">
            
                    
                    技术支持
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.8.1" data-path="../技术支持/常见问题.html">
            
                <a href="../技术支持/常见问题.html">
            
                    
                    常见问题
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.2" data-path="../技术支持/错误代码.html">
            
                <a href="../技术支持/错误代码.html">
            
                    
                    错误代码
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.3" data-path="../技术支持/如何升级.html">
            
                <a href="../技术支持/如何升级.html">
            
                    
                    如何升级
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.8.4" data-path="../技术支持/系统要求.html">
            
                <a href="../技术支持/系统要求.html">
            
                    
                    系统要求
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.9" data-path="../../summary/扩展.html">
            
                <a href="../../summary/扩展.html">
            
                    
                    扩展
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.9.1" data-path="../扩展/概述.html">
            
                <a href="../扩展/概述.html">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.2" data-path="../扩展/范例-hello-world.html">
            
                <a href="../扩展/范例-hello-world.html">
            
                    
                    范例-hello-world
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.3" data-path="../扩展/范例-word-count.html">
            
                <a href="../扩展/范例-word-count.html">
            
                    
                    范例-word-count
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.4" data-path="../扩展/范例-language-server.html">
            
                <a href="../扩展/范例-language-server.html">
            
                    
                    范例-language-server
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.5" data-path="../扩展/范例-调试器.html">
            
                <a href="../扩展/范例-调试器.html">
            
                    
                    范例-调试器
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.6" data-path="../扩展/调试-扩展.html">
            
                <a href="../扩展/调试-扩展.html">
            
                    
                    调试-扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.7" data-path="../扩展/安装-扩展.html">
            
                <a href="../扩展/安装-扩展.html">
            
                    
                    安装-扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.8" data-path="../扩展/范式-原则.html">
            
                <a href="../扩展/范式-原则.html">
            
                    
                    范式-原则
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.9" data-path="../扩展/测试-扩展.html">
            
                <a href="../扩展/测试-扩展.html">
            
                    
                    测试-扩展
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.9.10" data-path="../扩展/用我们的方法创造扩展.html">
            
                <a href="../扩展/用我们的方法创造扩展.html">
            
                    
                    用我们的方法创造扩展
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.10" data-path="../../summary/扩展API.html">
            
                <a href="../../summary/扩展API.html">
            
                    
                    扩展API
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.10.1" data-path="概述.html">
            
                <a href="概述.html">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.2" data-path="扩展manifest文件.html">
            
                <a href="扩展manifest文件.html">
            
                    
                    扩展manifest文件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.3" data-path="扩展点.html">
            
                <a href="扩展点.html">
            
                    
                    扩展点
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.4" data-path="激活事件.html">
            
                <a href="激活事件.html">
            
                    
                    激活事件
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.5" data-path="vscode-api.html">
            
                <a href="vscode-api.html">
            
                    
                    vscode-api
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.10.6" data-path="vscode-api-命令.html">
            
                <a href="vscode-api-命令.html">
            
                    
                    vscode-api-命令
            
                </a>
            

            
        </li>
    
        <li class="chapter active" data-level="1.10.7" data-path="api调试.html">
            
                <a href="api调试.html">
            
                    
                    api调试
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.11" data-path="../../summary/语言.html">
            
                <a href="../../summary/语言.html">
            
                    
                    语言
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.11.1" data-path="../语言/概述.html">
            
                <a href="../语言/概述.html">
            
                    
                    概述
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.2" data-path="../语言/javascript.html">
            
                <a href="../语言/javascript.html">
            
                    
                    Javascript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.3" data-path="../语言/json.html">
            
                <a href="../语言/json.html">
            
                    
                    JSON
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.4" data-path="../语言/html.html">
            
                <a href="../语言/html.html">
            
                    
                    HTML(暂无)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.5" data-path="../语言/css.html">
            
                <a href="../语言/css.html">
            
                    
                    CSS, Sass and Less
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.6" data-path="../语言/typescript.html">
            
                <a href="../语言/typescript.html">
            
                    
                    TypeScript
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.7" data-path="../语言/markdown.html">
            
                <a href="../语言/markdown.html">
            
                    
                    Markdown
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.8" data-path="../语言/cpp.html">
            
                <a href="../语言/cpp.html">
            
                    
                    C++
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.9" data-path="../语言/java.md">
            
                <span>
            
                    
                    Java(暂无)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.10" data-path="../语言/php.html">
            
                <a href="../语言/php.html">
            
                    
                    PHP
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.11" data-path="../语言/python.html">
            
                <a href="../语言/python.html">
            
                    
                    Python
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.12" data-path="../语言/go.md">
            
                <span>
            
                    
                    Go(暂无)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.13" data-path="../语言/dockerfile.html">
            
                <a href="../语言/dockerfile.html">
            
                    
                    Dockerfile
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.14" data-path="../语言/t-sql.md">
            
                <span>
            
                    
                    T-SQL(暂无)
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.11.15" data-path="../语言/csharp.html">
            
                <a href="../语言/csharp.html">
            
                    
                    C#
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="1.12" data-path="../../summary/运行时.html">
            
                <a href="../../summary/运行时.html">
            
                    
                    运行时
            
                </a>
            

            
            <ul class="articles">
                
    
        <li class="chapter " data-level="1.12.1" data-path="../运行时/nodejs.html">
            
                <a href="../运行时/nodejs.html">
            
                    
                    nodejs
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.2" data-path="../运行时/ASPnet5.html">
            
                <a href="../运行时/ASPnet5.html">
            
                    
                    ASPnet5
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.3" data-path="../运行时/unity.html">
            
                <a href="../运行时/unity.html">
            
                    
                    unity
            
                </a>
            

            
        </li>
    
        <li class="chapter " data-level="1.12.4" data-path="../运行时/office.html">
            
                <a href="../运行时/office.html">
            
                    
                    office
            
                </a>
            

            
        </li>
    

            </ul>
            
        </li>
    

    

    <li class="divider"></li>

    <li>
        <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
            本书使用 GitBook 发布
        </a>
    </li>
</ul>


                </nav>
            
        
    </div>

    <div class="book-body">
        
            <div class="body-inner">
                
                    

<div class="book-header" role="navigation">
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="../.." >api调试</a>
    </h1>
</div>




                    <div class="page-wrapper" tabindex="-1" role="main">
                        <div class="page-inner">
                            
<div id="book-search-results">
    <div class="search-noresults">
    
                                <section class="normal markdown-section">
                                
                                <h1 id="debugging-api">Debugging API</h1>
<p>Since Visual Studio Code implements a language agnostic debug UI, it does not communicate directly with real debuggers
but instead talks to so-called <em>debug adapters</em> through an abstract wire protocol, the <em>VS Code Debug Protocol</em> (or CDP for short).</p>
<p><img src="images/api-debugging/debug-arch.png" alt="Debugger Architecture"></p>
<p>Extensibility of the debug component of VS Code is currently limited to adding new debug adapters.
So it is not (yet) possible to extend the debugger UI in similar ways as for example the editor component of VS Code.</p>
<h2 id="debug-adapter">Debug Adapter</h2>
<p>A debug adapter is a standalone executable that talks to a real debugger and translates between the abstract
CDP and the concrete protocol of the debugger. Since a debug adapter can be implemented in the language that is best suited
for a given debugger backend, the wire protocol is more important than the API of a particular client library that implements
that protocol.</p>
<p>You can find the protocol specification expressed as a TypeScript definition file in the GitHub repository
<a href="https://github.com/Microsoft/vscode-debugadapter-node/blob/master/protocol/src/debugProtocol.ts" target="_blank"><code>vscode-debugadapter-node</code></a>.
It shows the detailed structure of the CDP protocol requests, responses and events.
The protocol is also available as the NPM module <a href="https://www.npmjs.com/package/vscode-debugprotocol" target="_blank"><code>vscode-debugprotocol</code></a>.</p>
<p>We have already implemented client libraries for CDP in TypeScript and C#, but only the JavaScript/TypeScript client library is already available as an NPM module <a href="https://github.com/Microsoft/vscode-debugadapter-node" target="_blank"><code>vscode-debugadapter-node</code></a>. You can find the C# client library in the <a href="https://github.com/Microsoft/vscode-mono-debug/blob/master/src/DebugSession.cs" target="_blank">Mono Debug</a> repository.</p>
<p>The following debugger extension projects can serve as examples for how to implement debug adapters:</p>
<table>
<thead>
<tr>
<th>GitHub Project</th>
<th>Description</th>
<th>Implementation Language</th>
</tr>
</thead>
<tbody>
<tr>
<td><a href="https://github.com/Microsoft/vscode-mock-debug.git" target="_blank">Mock Debug</a></td>
<td>A &apos;fake&apos; debugger</td>
<td>TypeScript/JavaScript</td>
</tr>
<tr>
<td><a href="https://github.com/Microsoft/vscode-node-debug.git" target="_blank">Node Debug</a></td>
<td>The built-in Node.js debugger</td>
<td>TypeScript/JavaScript</td>
</tr>
<tr>
<td><a href="https://github.com/Microsoft/vscode-mono-debug.git" target="_blank">Mono Debug</a></td>
<td>A simple C# debugger for Mono</td>
<td>C#</td>
</tr>
</tbody>
</table>
<h2 id="the-vs-code-debug-protocol-in-a-nutshell">The VS Code Debug Protocol in a Nutshell</h2>
<p>In this section we will give a high-level overview of the interaction between VS Code and a debug adapter.
This should help you in your implementation of a debug adapter based on CDP.</p>
<p>When a debug sessions starts, VS Code launches the debug adapter executable and talks to it through <em>stdin</em> and <em>stdout</em>. VS Code sends an <strong>initialize</strong> request to configure the adapter with information about the path format (native or URI) and whether line and column values are 0 or 1 based.
If your adapter is derived from the TypeScript or C# default implementation <code>DebugSession</code>, you don&apos;t have to handle the initialize request yourself.</p>
<p>Depending on the &apos;request&apos; attribute used in the launch configuration created by the user, VS Code either sends a <em>launch</em> or an <em>attach</em> request.
For <strong>launch</strong> the debug adapter has to launch a runtime or program so that it can be debugged.
If the program can interact with the user through stdin/stdout, it is important that the debug adapter launches the program in an interactive terminal or console.
For <strong>attach</strong> the debug adapter has to attach or connect to an already running program.</p>
<p>Since arguments for both requests are highly dependent on a specific debug adapter implementation, the CDP does not prescribe
any arguments. Instead VS Code passes all arguments from the user&apos;s launch configuration to the <em>launch</em> or <em>attach</em> requests.
A schema for IntelliSense and hover information for these attributes can be contributed in the <code>package.json</code> of the debug adapter extension. This will guide the user when creating or editing launch configurations.</p>
<p>Since VS Code persists breakpoints on behalf of the debug adapter, it has to register the breakpoints with the debug adapter when a session starts.
Since VS Code does not know when is a good time for this, the debug adapter is expected to send an <strong>initialize</strong> event to VS Code
to announce that it is ready to accept breakpoint configuration requests.</p>
<p>VS Code will then send all breakpoints by calling these breakpoint configuration requests:</p>
<ul>
<li><strong>setBreakpoints</strong> for every source file with breakpoints,</li>
<li><strong>setFunctionBreakpoints</strong> if the debug adapter supports function breakpoints,</li>
<li><strong>setExceptionBreakpoints</strong> if the debug adapter supports any exception options,</li>
<li><strong>configurationDoneRequest</strong> to indicate the end of the configuration sequence.</li>
</ul>
<p>So don&apos;t forget to send the <em>initialize</em> event when you are ready to accept breakpoints. Otherwise persisted breakpoints are not restored.</p>
<p>The <em>setBreakpoint</em> request sets all breakpoints that exist for a file (so it is not incremental).
A simple implementation of this semantics in the debug adapter is to clear all breakpoints for a file and then set the breakpoints specified in the request.
<em>setBreakpoints</em> and <em>setFunctionBreakpoints</em> are expected to return the &apos;actual&apos; breakpoints and VS Code updates the UI dynamically if a breakpoint could not be set at the requested position and was moved by the debugger backend.</p>
<p>Whenever the program stops (on program entry, because a breakpoint was hit, an exception occurred, or the user requested execution to be paused),
the debug adapter has to send a <strong>stopped</strong> event with the appropriate reason and thread id.
Upon receipt VS Code will first request the <strong>threads</strong> (see below), and then the <strong>stacktrace</strong> (a list of stack frames) for the thread mentioned in the stopped event.
If the user then drills into the stack frame, VS Code first requests the <strong>scopes</strong> for a stack frame, and then the <strong>variables</strong> for a scope.
If a variable is itself structured, VS Code requests its properties through additional <em>variables</em> requests.
This leads to the following hierarchy:</p>
<pre><code>Threads
    Stackframes
        Scopes
            Variables
                ...
                    Variables
</code></pre><p>The VS Code debug UI supports multiple threads (but you are probably not aware of this if you are only using the Node.js debugger). Whenever VS Code receives a <strong>stopped</strong> or a <strong>thread</strong> event, VS Code requests all <strong>threads</strong> that exist at that point in time and displays them if there are more than one. If only one thread is detected, the VS Code UI stays in single thread mode. <strong>Thread</strong> events are optional but a debug adapter can send them to force VS Code to update the threads UI dynamically even when not in a stopped state.</p>
<p>After a successful <strong>launch</strong> or <strong>attach</strong> VS Code requests the baseline of currently existing threads with the <strong>threads</strong> request and then starts to listen for <strong>thread</strong> events to detect new or terminated threads. Even if your debug adapter does not support multiple threads, it must implement the <strong>threads</strong> request and return a single (dummy) thread. The id of this thread must be used in all requests where a thread id is required, e.g. <strong>stacktrace</strong>, <strong>pause</strong>, <strong>continue</strong>, <strong>next</strong>, <strong>stepIn</strong>, and <strong>stepOut</strong>.</p>
<p>VS Code terminates a debug session with the <strong>disconnect</strong> request.
If the debug target was &apos;launched&apos; <em>disconnect</em> is expected to terminate the target program (even forcefully if necessary).
If the debug target has been &apos;attached&apos; initially, <em>disconnect</em> should detach it from the target (so that it will continue to run).
In both cases and in the case that the target terminated normally or crashed the debug adapter must fire a <strong>terminated</strong> event.
After receiving a response from the <em>disconnect</em> request, VS Code will terminate the debug adapter.</p>
<h2 id="next-steps">Next Steps</h2>
<p>To learn more about VS Code extensibility model, try these topics:</p>
<ul>
<li><a href="../../docs/extensions/example-debuggers.md">Example Debuggers</a> - See a working &apos;mock&apos; debugger example</li>
<li><a href="../../docs/extensionAPI/overview.md">Extension API Overview</a> - Learn about the full VS Code extensibility model.</li>
<li><a href="../../docs/extensionAPI/extension-manifest.md">Extension Manifest File</a> - VS Code package.json extension manifest file reference</li>
<li><a href="../../docs/extensionAPI/extension-points.md">Contribution Points</a> - VS Code contribution points reference</li>
</ul>
<h2 id="common-questions">Common Questions</h2>
<p>Nothing yet</p>

                                
                                </section>
                            
    </div>
    <div class="search-results">
        <div class="has-results">
            
            <h1 class="search-results-title"><span class='search-results-count'></span> results matching "<span class='search-query'></span>"</h1>
            <ul class="search-results-list"></ul>
            
        </div>
        <div class="no-results">
            
            <h1 class="search-results-title">No results matching "<span class='search-query'></span>"</h1>
            
        </div>
    </div>
</div>

                        </div>
                    </div>
                
            </div>

            
                
                <a href="vscode-api-命令.html" class="navigation navigation-prev " aria-label="Previous page: vscode-api-命令">
                    <i class="fa fa-angle-left"></i>
                </a>
                
                
                <a href="../../summary/语言.html" class="navigation navigation-next " aria-label="Next page: 语言">
                    <i class="fa fa-angle-right"></i>
                </a>
                
            
        
    </div>

    <script>
        var gitbook = gitbook || [];
        gitbook.push(function() {
            gitbook.page.hasChanged({"page":{"Order":7,"Area":"extensionapi","TOCTitle":"API debugging","ContentId":"9C4B10A2-44BE-4ABD-8FF4-F1A8683A90AD","PageTitle":"Visual Studio Code Debugging API","DateApproved":"4/14/2016","MetaDescription":"Visual Studio Code extensions (plug-ins) Debugging API.","title":"api调试","level":"1.10.7","depth":2,"next":{"title":"语言","level":"1.11","depth":1,"path":"summary/语言.md","ref":"summary/语言.md","articles":[{"title":"概述","level":"1.11.1","depth":2,"path":"md/语言/概述.md","ref":"md/语言/概述.md","articles":[]},{"title":"Javascript","level":"1.11.2","depth":2,"path":"md/语言/javascript.md","ref":"md/语言/javascript.md","articles":[]},{"title":"JSON","level":"1.11.3","depth":2,"path":"md/语言/json.md","ref":"md/语言/json.md","articles":[]},{"title":"HTML(暂无)","level":"1.11.4","depth":2,"path":"md/语言/html.md","ref":"md/语言/html.md","articles":[]},{"title":"CSS, Sass and Less","level":"1.11.5","depth":2,"path":"md/语言/css.md","ref":"md/语言/css.md","articles":[]},{"title":"TypeScript","level":"1.11.6","depth":2,"path":"md/语言/typescript.md","ref":"md/语言/typescript.md","articles":[]},{"title":"Markdown","level":"1.11.7","depth":2,"path":"md/语言/markdown.md","ref":"md/语言/markdown.md","articles":[]},{"title":"C++","level":"1.11.8","depth":2,"path":"md/语言/cpp.md","ref":"md/语言/cpp.md","articles":[]},{"title":"Java(暂无)","level":"1.11.9","depth":2,"path":"md/语言/java.md","ref":"md/语言/java.md","articles":[]},{"title":"PHP","level":"1.11.10","depth":2,"path":"md/语言/php.md","ref":"md/语言/php.md","articles":[]},{"title":"Python","level":"1.11.11","depth":2,"path":"md/语言/python.md","ref":"md/语言/python.md","articles":[]},{"title":"Go(暂无)","level":"1.11.12","depth":2,"path":"md/语言/go.md","ref":"md/语言/go.md","articles":[]},{"title":"Dockerfile","level":"1.11.13","depth":2,"path":"md/语言/dockerfile.md","ref":"md/语言/dockerfile.md","articles":[]},{"title":"T-SQL(暂无)","level":"1.11.14","depth":2,"path":"md/语言/t-sql.md","ref":"md/语言/t-sql.md","articles":[]},{"title":"C#","level":"1.11.15","depth":2,"path":"md/语言/csharp.md","ref":"md/语言/csharp.md","articles":[]}]},"previous":{"title":"vscode-api-命令","level":"1.10.6","depth":2,"path":"md/扩展API/vscode-api-命令.md","ref":"md/扩展API/vscode-api-命令.md","articles":[]},"dir":"ltr"},"config":{"plugins":["-lunr","-search","search-pro","intopic-toc","livereload"],"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"pluginsConfig":{"intopic-toc":{"isCollapsed":false,"isScrollspyActive":true,"label":"On This Page","maxDepth":6,"mode":"nested","selector":".markdown-section h1, .markdown-section h2, .markdown-section h3, .markdown-section h4, .markdown-section h5","visible":true},"search-pro":{},"livereload":{},"highlight":{},"sharing":{"facebook":true,"twitter":true,"google":false,"weibo":false,"instapaper":false,"vk":false,"all":["facebook","google","twitter","weibo","instapaper"]},"fontsettings":{"theme":"white","family":"sans","size":2},"theme-default":{"styles":{"website":"styles/website.css","pdf":"styles/pdf.css","epub":"styles/epub.css","mobi":"styles/mobi.css","ebook":"styles/ebook.css","print":"styles/print.css"},"showLevel":false}},"theme":"default","author":"VSCodeContributorsinChina","pdf":{"pageNumbers":true,"fontSize":12,"fontFamily":"Arial","paperSize":"a4","chapterMark":"pagebreak","pageBreaksBefore":"/","margin":{"right":62,"left":62,"top":56,"bottom":56}},"structure":{"langs":"LANGS.md","readme":"README.md","glossary":"GLOSSARY.md","summary":"SUMMARY.md"},"variables":{},"title":"vscode-docs","language":"zh-hans","gitbook":"*"},"file":{"path":"md/扩展API/api调试.md","mtime":"2021-05-20T07:06:10.000Z","type":"markdown"},"gitbook":{"version":"3.2.3","time":"2023-04-07T07:25:43.262Z"},"basePath":"../..","book":{"language":""}});
        });
    </script>
</div>

        
    <script src="../../gitbook/gitbook.js"></script>
    <script src="../../gitbook/theme.js"></script>
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/jquery.mark.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-search-pro/search.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-intopic-toc/anchor.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-intopic-toc/gumshoe.polyfills.min.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-intopic-toc/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-livereload/plugin.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-sharing/buttons.js"></script>
        
    
        
        <script src="../../gitbook/gitbook-plugin-fontsettings/fontsettings.js"></script>
        
    

    </body>
</html>

